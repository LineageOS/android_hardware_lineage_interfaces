{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9a5cf7ef_2d5fda91",
        "filename": "health/aidl/default/ChargingControl.cpp",
        "patchSetId": 22
      },
      "lineNbr": 31,
      "author": {
        "id": 11883
      },
      "writtenOn": "2023-05-10T09:56:42Z",
      "side": 1,
      "message": "android::base::unique_fd fd(TEMP_FAILURE_RETRY(open(path.c_str(), O_RDONLY)));\nreturn fd \u003e -1;\n\nAvoids creating a stream, that\u0027s pricey :)\nunique_fd should close the fd thanks to RAII",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 31,
        "endChar": 24
      },
      "revId": "067f640a84c374d2e8c81b29890950cf262702ae",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2488e4b0_7143e6a9",
        "filename": "health/aidl/default/ChargingControl.cpp",
        "patchSetId": 22
      },
      "lineNbr": 31,
      "author": {
        "id": 11883
      },
      "writtenOn": "2023-05-10T10:02:02Z",
      "side": 1,
      "message": "Likely read/write?",
      "parentUuid": "9a5cf7ef_2d5fda91",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 31,
        "endChar": 24
      },
      "revId": "067f640a84c374d2e8c81b29890950cf262702ae",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a77465b_a562de21",
        "filename": "health/aidl/default/ChargingControl.cpp",
        "patchSetId": 22
      },
      "lineNbr": 63,
      "author": {
        "id": 11883
      },
      "writtenOn": "2023-05-10T09:56:42Z",
      "side": 1,
      "message": "bool ReadFileToString(const std::string\u0026 path, std::string* content,\n                      bool follow_symlinks \u003d false);\n\n    std::string content;\n    if (!ReadFileToString(mChargingEnabledNode-\u003epath, \u0026content, true)) {\n        LOG(ERROR) \u003c\u003c \"Failed to read current charging enabled value\";\n        return ndk::ScopedAStatus::fromExceptionCode(EX_ILLEGAL_STATE);\n    }\n    \nI added follow_symlinks as I assume most of those sysfs nodes are links",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 63,
        "endChar": 5
      },
      "revId": "067f640a84c374d2e8c81b29890950cf262702ae",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53ffc8d7_4a98e367",
        "filename": "health/aidl/default/ChargingControl.cpp",
        "patchSetId": 22
      },
      "lineNbr": 90,
      "author": {
        "id": 11883
      },
      "writtenOn": "2023-05-10T09:56:42Z",
      "side": 1,
      "message": "bool WriteStringToFile(const std::string\u0026 content, const std::string\u0026 path,\n                       bool follow_symlinks \u003d false);\n\n    const auto\u0026 value \u003d enabled ? mChargingEnabledNode-\u003evalue_true : mChargingEnabledNode-\u003evalue_false\n    if (!WriteStringToFile(mChargingEnabledNode-\u003epath, value, true)) {\n        LOG(ERROR) \u003c\u003c \"Failed to write to charging enable node: \" \u003c\u003c strerror(errno);\n        return ndk::ScopedAStatus::fromExceptionCode(EX_ILLEGAL_STATE);\n    }",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 90,
        "endChar": 5
      },
      "revId": "067f640a84c374d2e8c81b29890950cf262702ae",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    }
  ]
}